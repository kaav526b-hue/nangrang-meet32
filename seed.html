<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>Seed Participants</title>
</head>
<body>
  <h1>참가자 등록 중...</h1>
  <pre id="log"></pre>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
    import { getFirestore, doc, writeBatch } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

    // 🔧 당신의 Firebase 설정 (이미 입력됨)
    const firebaseConfig = {
      apiKey: "AIzaSyDaTFgAP0n-qmr5NOOD_jeNAFhQuY_kkfM",
      authDomain: "nangrang-meet32.firebaseapp.com",
      projectId: "nangrang-meet32",
      storageBucket: "nangrang-meet32.firebasestorage.app",
      messagingSenderId: "1014148883717",
      appId: "1:1014148883717:web:338eba4b9bc51482e6c36c"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // ✅ 여기에 32명 목록 (요청하신 그대로)
    const dal = [
      { number: 1, name: '블레어' },
      { number: 2, name: '고네' },
      { number: 3, name: '세레나' },
      { number: 4, name: '류진' },
      { number: 5, name: '지우' },
      { number: 6, name: '지니' },
      { number: 7, name: '랑이' },
      { number: 8, name: '맑음' },
      { number: 9, name: '망고' },
      { number: 10, name: '소영' },
      { number: 11, name: '정숙님' },
      { number: 12, name: '솜솜' },
      { number: 13, name: '칸쵸' },
      { number: 14, name: '돌고래' },
      { number: 15, name: '완두콩' },
      { number: 16, name: '다우니' },
    ];

    const hae = [
      { number: 1,  name: '세민킴' },
      { number: 2,  name: '호식이' },
      { number: 3,  name: '스티브' },
      { number: 4,  name: '고봉이' },
      { number: 5,  name: '우루' },
      { number: 6,  name: '주노' },
      { number: 7,  name: '루키' },
      { number: 8,  name: '요린이' },
      { number: 9,  name: '여리' },
      { number: 10, name: '태양' },
      { number: 11, name: '밤단풍' },
      { number: 12, name: '메기' },
      { number: 13, name: '깔끔이' },
      { number: 14, name: '보물' },
      { number: 15, name: '물고기' },
      { number: 16, name: '토미' },
    ];

    // Firestore에 저장할 배열 (그룹 표시 포함)
    const participants = [
      ...dal.map(x => ({ group: '달님반', ...x })),
      ...hae.map(x => ({ group: '햇님반', ...x })),
    ];

    // 문서 ID 규칙: 달님반 D01~D16, 햇님반 H01~H16
    const idOf = (p) => {
      const prefix = p.group === '달님반' ? 'D' : 'H';
      return `${prefix}${String(p.number).padStart(2, '0')}`;
    };

    (async () => {
      const log = (msg) => (document.getElementById('log').textContent += msg + '\n');

      try {
        const batch = writeBatch(db);
        participants.forEach(p => {
          const id = idOf(p);
          batch.set(doc(db, 'participants', id), {
            group: p.group,
            number: p.number,
            name: p.name,
          });
          log(`+ ${id} ${p.group} ${p.number} ${p.name}`);
        });

        await batch.commit();
        log('\n✅ 등록 완료! (총 32명)');
        log('이 페이지는 1회성으로 사용했으면 삭제하세요: seed.html');
      } catch (e) {
        console.error(e);
        document.getElementById('log').textContent += '\n❌ 오류: ' + (e.message || e);
      }
    })();
  </script>
</body>
</html>
