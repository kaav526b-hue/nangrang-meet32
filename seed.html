<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>Seed Participants</title>
</head>
<body>
  <h1>ì°¸ê°€ì ë“±ë¡ ì¤‘...</h1>
  <pre id="log"></pre>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
    import { getFirestore, doc, writeBatch } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

    // ğŸ”§ ë‹¹ì‹ ì˜ Firebase ì„¤ì • (ì´ë¯¸ ì…ë ¥ë¨)
    const firebaseConfig = {
      apiKey: "AIzaSyDaTFgAP0n-qmr5NOOD_jeNAFhQuY_kkfM",
      authDomain: "nangrang-meet32.firebaseapp.com",
      projectId: "nangrang-meet32",
      storageBucket: "nangrang-meet32.firebasestorage.app",
      messagingSenderId: "1014148883717",
      appId: "1:1014148883717:web:338eba4b9bc51482e6c36c"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // âœ… ì—¬ê¸°ì— 32ëª… ëª©ë¡ (ìš”ì²­í•˜ì‹  ê·¸ëŒ€ë¡œ)
    const dal = [
      { number: 1, name: 'ë¸”ë ˆì–´' },
      { number: 2, name: 'ê³ ë„¤' },
      { number: 3, name: 'ì„¸ë ˆë‚˜' },
      { number: 4, name: 'ë¥˜ì§„' },
      { number: 5, name: 'ì§€ìš°' },
      { number: 6, name: 'ì§€ë‹ˆ' },
      { number: 7, name: 'ë‘ì´' },
      { number: 8, name: 'ë§‘ìŒ' },
      { number: 9, name: 'ë§ê³ ' },
      { number: 10, name: 'ì†Œì˜' },
      { number: 11, name: 'ì •ìˆ™ë‹˜' },
      { number: 12, name: 'ì†œì†œ' },
      { number: 13, name: 'ì¹¸ìµ¸' },
      { number: 14, name: 'ëŒê³ ë˜' },
      { number: 15, name: 'ì™„ë‘ì½©' },
      { number: 16, name: 'ë‹¤ìš°ë‹ˆ' },
    ];

    const hae = [
      { number: 1,  name: 'ì„¸ë¯¼í‚´' },
      { number: 2,  name: 'í˜¸ì‹ì´' },
      { number: 3,  name: 'ìŠ¤í‹°ë¸Œ' },
      { number: 4,  name: 'ê³ ë´‰ì´' },
      { number: 5,  name: 'ìš°ë£¨' },
      { number: 6,  name: 'ì£¼ë…¸' },
      { number: 7,  name: 'ë£¨í‚¤' },
      { number: 8,  name: 'ìš”ë¦°ì´' },
      { number: 9,  name: 'ì—¬ë¦¬' },
      { number: 10, name: 'íƒœì–‘' },
      { number: 11, name: 'ë°¤ë‹¨í’' },
      { number: 12, name: 'ë©”ê¸°' },
      { number: 13, name: 'ê¹”ë”ì´' },
      { number: 14, name: 'ë³´ë¬¼' },
      { number: 15, name: 'ë¬¼ê³ ê¸°' },
      { number: 16, name: 'í† ë¯¸' },
    ];

    // Firestoreì— ì €ì¥í•  ë°°ì—´ (ê·¸ë£¹ í‘œì‹œ í¬í•¨)
    const participants = [
      ...dal.map(x => ({ group: 'ë‹¬ë‹˜ë°˜', ...x })),
      ...hae.map(x => ({ group: 'í–‡ë‹˜ë°˜', ...x })),
    ];

    // ë¬¸ì„œ ID ê·œì¹™: ë‹¬ë‹˜ë°˜ D01~D16, í–‡ë‹˜ë°˜ H01~H16
    const idOf = (p) => {
      const prefix = p.group === 'ë‹¬ë‹˜ë°˜' ? 'D' : 'H';
      return `${prefix}${String(p.number).padStart(2, '0')}`;
    };

    (async () => {
      const log = (msg) => (document.getElementById('log').textContent += msg + '\n');

      try {
        const batch = writeBatch(db);
        participants.forEach(p => {
          const id = idOf(p);
          batch.set(doc(db, 'participants', id), {
            group: p.group,
            number: p.number,
            name: p.name,
          });
          log(`+ ${id} ${p.group} ${p.number} ${p.name}`);
        });

        await batch.commit();
        log('\nâœ… ë“±ë¡ ì™„ë£Œ! (ì´ 32ëª…)');
        log('ì´ í˜ì´ì§€ëŠ” 1íšŒì„±ìœ¼ë¡œ ì‚¬ìš©í–ˆìœ¼ë©´ ì‚­ì œí•˜ì„¸ìš”: seed.html');
      } catch (e) {
        console.error(e);
        document.getElementById('log').textContent += '\nâŒ ì˜¤ë¥˜: ' + (e.message || e);
      }
    })();
  </script>
</body>
</html>
